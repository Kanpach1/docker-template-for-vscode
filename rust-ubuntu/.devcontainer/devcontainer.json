// written by amatzk

// devcontainer.json リファレンス
// https://containers.dev/implementors/json_reference/
{
    // UIに表示されるDevContainer名
    "name": "rust-ubuntu-container",
    "dockerFile": "Dockerfile",
    "customizations": {
        // VSCodeや拡張機能の設定
        "vscode": {
            // 設定（コンテナ内全体で有効）
            "settings": {
                "files.watcherExclude": {
                    "**/target/**": true
                },
                "[rust]": {
                    "editor.formatOnSave": true
                },
                "rust-analyzer.checkOnSave": true,
                "rust-analyzer.check.command": "clippy"
            },
            // 拡張機能（コンテナ内全体で有効）
            "extensions": [
                "vadimcn.vscode-lldb",
                "rust-lang.rust-analyzer",
                "tamasfe.even-better-toml",
                "serayuzgur.crates"
            ]
        }
    },
    // コンテナ内で実行するユーザーを上書き
    "remoteUser": "vscode",
    // Features
    // ツール、ランタイム、ライブラリの「機能」を開発コンテナに迅速かつ簡単に追加し、自分や共同作業者が使用できるようにする「機能」
    // 公開 Features 一覧：https://containers.dev/features
    "features": {
        // Git
        // https://github.com/devcontainers/features/tree/main/src/git
        "ghcr.io/devcontainers/features/git:1": {
            "version": "latest",
            "ppa": true
        }
    }
    // VSCodeが開くデフォルトのパス
    // この設定がない場合のデフォルトは、ソースコードのマウント場所
    // コンテナ内では、/workspace/配下になる
    // Dockerfileに指定したRustは、コンテナ内の/home/vscode配下にある
    // "workspaceFolder": "/home/vscode",
}
